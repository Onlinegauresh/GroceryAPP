{% extends "admin/admin_base.html" %} {% block title %}Admin - Inventory{%
endblock %} {% block page_title %}Inventory Management{% endblock %} {% block
content %}
<div class="page-title">Inventory Management</div>

<!-- Stock Level Filter -->
<div class="card">
  <div class="card-header">
    <h3>Filter by Stock Level</h3>
  </div>
  <div style="display: flex; gap: 10px">
    <a href="/admin/inventory?filter=all" class="btn btn-secondary">All</a>
    <a href="/admin/inventory?filter=low" class="btn btn-danger">Low Stock</a>
    <a href="/admin/inventory?filter=out" class="btn btn-danger"
      >Out of Stock</a
    >
    <a href="/admin/inventory?filter=adequate" class="btn btn-primary"
      >Adequate Stock</a
    >
  </div>
</div>

<!-- Inventory Table -->
<div class="card">
  <div class="card-header">
    <h3>Stock Levels</h3>
  </div>

  {% if products %}
  <table>
    <thead>
      <tr>
        <th>Product ID</th>
        <th>Product Name</th>
        <th>Current Stock</th>
        <th>Status</th>
        <th>Value</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for item in products %}
      <tr>
        <td>#{{ item.id }}</td>
        <td><strong>{{ item.name }}</strong></td>
        <td>{{ item.current_stock }} units</td>
        <td>
          {% if item.current_stock == 0 %}
          <span
            class="status-badge"
            style="background-color: #f8d7da; color: #721c24"
            >OUT OF STOCK</span
          >
          {% elif item.current_stock < 10 %}
          <span
            class="status-badge"
            style="background-color: #fff3cd; color: #856404"
            >LOW STOCK</span
          >
          {% else %}
          <span
            class="status-badge"
            style="background-color: #d4edda; color: #155724"
            >ADEQUATE</span
          >
          {% endif %}
        </td>
        <td>${{ (item.cost_price * item.current_stock) | round(2) }}</td>
        <td>
          <div class="action-buttons">
            <a href="#" class="btn btn-secondary">Adjust</a>
            <a href="#" class="btn btn-primary">Reorder</a>
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p style="padding: 20px; text-align: center; color: #999">
    No inventory data found
  </p>
  {% endif %}
</div>

<!-- Inventory Summary -->
<div class="card">
  <div class="card-header">
    <h3>Inventory Summary</h3>
  </div>
  <div class="stats-grid" style="margin-bottom: 0">
    <div class="stat-card">
      <h3>{{ total_items | default(0) }}</h3>
      <p>Total Stock Items</p>
    </div>
    <div class="stat-card">
      <h3>{{ low_stock_items | default(0) }}</h3>
      <p>Low Stock Items</p>
    </div>
    <div class="stat-card">
      <h3>{{ out_of_stock_items | default(0) }}</h3>
      <p>Out of Stock</p>
    </div>
    <div class="stat-card">
      <h3>
        ${{ total_inventory_value | round(2) if total_inventory_value else
        '0.00' }}
      </h3>
      <p>Inventory Value</p>
    </div>
  </div>
</div>
{% endblock %}
