<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Admin Dashboard{% endblock %}</title>
    <link rel="stylesheet" href="/static/css/common.css" />
    <link rel="stylesheet" href="/static/css/admin.css" />
    <style>
      :root {
        --admin-primary: #1a472a;
        --admin-dark: #0d2817;
        --primary: #27c44f;
      }

      /* RESPONSIVE ADMIN SPECIFIC */
      .sidebar {
        background-color: var(--admin-primary);
      }

      .topbar {
        background-color: white;
      }

      .topbar h2 {
        color: var(--admin-primary);
      }

      .topbar .user-menu a {
        color: var(--admin-primary);
      }

      .sidebar nav a:hover,
      .sidebar nav a.active {
        background-color: var(--primary);
      }

      /* TABLET: Hide sidebar, show menu toggle */
      @media (max-width: 900px) {
        .sidebar {
          width: 100%;
          height: auto;
          position: static;
          padding: 1rem;
          display: none;
          flex-direction: column;
        }

        .sidebar.active {
          display: flex;
        }

        .main-content {
          margin-left: 0;
        }

        .admin-container {
          flex-direction: column;
        }

        .content {
          padding: 1rem;
        }
      }

      /* DESKTOP: Show sidebar normally */
      @media (min-width: 56.3125rem) {
        .sidebar {
          width: 250px;
          position: fixed;
          height: 100vh;
          display: flex;
          flex-direction: column;
        }

        .admin-container {
          display: flex;
        }

        .main-content {
          margin-left: 250px;
        }
      }
    </style>
    {% block extra_styles %}{% endblock %}
  </head>
  <body>
    <div class="admin-container">
      <!-- Sidebar Navigation -->
      <aside class="sidebar">
        <h1>Admin Panel</h1>
        <nav>
          <ul>
            <li>
              <a
                href="/admin/"
                class="{% if request.url.path == '/admin/' %}active{% endif %}"
                >Dashboard</a
              >
            </li>
            <li>
              <a
                href="/admin/orders"
                class="{% if '/orders' in request.url.path %}active{% endif %}"
                >Orders</a
              >
            </li>
            <li>
              <a
                href="/admin/products"
                class="{% if '/products' in request.url.path %}active{% endif %}"
                >Products</a
              >
            </li>
            <li>
              <a
                href="/admin/inventory"
                class="{% if '/inventory' in request.url.path %}active{% endif %}"
                >Inventory</a
              >
            </li>
            <li>
              <a
                href="/admin/accounting"
                class="{% if '/accounting' in request.url.path %}active{% endif %}"
                >Accounting</a
              >
            </li>
            <li>
              <a
                href="/admin/ai"
                class="{% if '/ai' in request.url.path %}active{% endif %}"
                >AI Insights</a
              >
            </li>
            <li
              style="
                margin-top: 30px;
                padding-top: 20px;
                border-top: 1px solid rgba(255, 255, 255, 0.2);
              "
            >
              <a href="/shop">View Shop</a>
            </li>
          </ul>
        </nav>
      </aside>

      <!-- Main Content Area -->
      <div class="main-content">
        <!-- Top Bar -->
        <div class="topbar">
          <h2>{% block page_title %}Dashboard{% endblock %}</h2>
          <div class="user-menu">
            <span>Admin User</span>
            <a href="/logout">Logout</a>
          </div>
        </div>

        <!-- Content -->
        <div class="content">
          {% if message %}
          <div class="alert alert-success show">{{ message }}</div>
          {% endif %} {% if error %}
          <div class="alert alert-error show">{{ error }}</div>
          {% endif %} {% block content %}{% endblock %}
        </div>
      </div>
    </div>

    <script>
      // Auto-dismiss alerts after 5 seconds
      const alerts = document.querySelectorAll(".alert.show");
      alerts.forEach((alert) => {
        setTimeout(() => {
          alert.style.display = "none";
        }, 5000);
      });
    </script>
    {% block extra_scripts %}{% endblock %}
  </body>
</html>
